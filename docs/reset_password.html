<!DOCTYPE html>
<html>
  <body>
    <script>
      // Estrae il token dalla URL (Supabase lo manda come hash)
      const hash = window.location.hash.substring(1);
      const params = new URLSearchParams(hash);
      const token = params.get("access_token");

      if (token) {
        // Apri l'app tramite schema custom
        window.location.href = "appbase://reset?token=" + token;

        // Fallback dopo 2 secondi se l'app non si apre
        setTimeout(() => {
          document.body.innerHTML = `
            <h2>Apri l'app per completare il reset password</h2>
            <p>Se l'app non si Ã¨ aperta automaticamente, clicca qui:</p>
            <a href="appbase://reset?token=${token}">Apri l'app</a>
          `;
        }, 2000);
      } else {
        document.body.innerHTML = "<h2>Token non trovato</h2>";
      }
    </script>
  </body>
</html>
